/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@angular/youtube-player",["exports","@angular/core","rxjs","rxjs/operators"],e):e((t.ng=t.ng||{},t.ng.youtubePlayer={}),t.ng.core,t.rxjs,t.rxjs.operators)}(this,function(t,e,n,i){"use strict";function r(t,e,i){return n.combineLatest([t,e,i]).subscribe(function(t){var e=t[0],n=t[1],i=t[2];return e&&e.setSize(n,i)})}function o(t,e){return n.combineLatest([t,e]).subscribe(function(t){var e=t[0],n=t[1];return e&&n&&e.setPlaybackQuality(n)})}function a(){return i.flatMap(function(t){return t?"getPlayerStatus"in t?n.of(t):u(t).pipe(i.first(),i.startWith(void 0)):n.of(void 0)})}function u(t){return new n.Observable(function(e){var n=!1,i=function(t){n||(t.target.removeEventListener("onReady",i),e.next(t.target))};return t.addEventListener("onReady",i),function(){n=!0}})}function s(t,e,r,o,a,u){var s=e.pipe(i.withLatestFrom(n.combineLatest([o,a])),i.map(function(t){var e=t[0],n=t[1],i=n[0],r=n[1];return e?{videoId:e,width:i,height:r,events:u}:void 0}));return n.combineLatest([t,s]).pipe(p(r),i.scan(y,void 0),i.distinctUntilChanged())}function p(t){return n.pipe(i.combineLatest(t),i.skipWhile(function(t){t[0];return!t[1]}),i.map(function(t){return t[0]}))}function y(t,e){var n=e[0],i=e[1];if(!i)return void(t&&t.destroy());if(t)return t;var r=new YT.Player(n,i);return r.videoId=i.videoId,r}function c(t,e,r,o,a,u){var s=n.combineLatest([r,o]).pipe(i.map(function(t){return{startSeconds:t[0],endSeconds:t[1]}})),p=s.pipe(d(t,function(t){return!!t&&!h(t)})),y=e.pipe(d(t,function(t,e){return!!t&&t.videoId!==e})),c=t.pipe(d(n.combineLatest([e,s]),function(t,e){var n=t[0],i=t[1];return!(!e||n==e.videoId&&!i.startSeconds&&!i.endSeconds)}));n.merge(c,y,p).pipe(i.withLatestFrom(n.combineLatest([t,e,s,a])),i.map(function(t){t[0];return t[1]}),i.takeUntil(u)).subscribe(function(t){var e=t[0],n=t[1],i=t[2],r=t[3];n&&e&&(e.videoId=n,e.cueVideoById(l({videoId:n,suggestedQuality:r},i)))})}function h(t){return-1===[-1,5].indexOf(t.getPlayerState())}function d(t,e){return n.pipe(i.withLatestFrom(t),i.filter(function(t){var n=t[0],i=t[1];return e(i,n)}),i.map(function(t){return t[0]}))}var l=function(){return l=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},l.apply(this,arguments)},f=640,g=390,_="object"==typeof window&&!!window,b=function(){function t(t){this._ngZone=t,this._videoIdObs=new e.EventEmitter,this._height=g,this._heightObs=new e.EventEmitter,this._width=f,this._widthObs=new e.EventEmitter,this._startSeconds=new e.EventEmitter,this._endSeconds=new e.EventEmitter,this._suggestedQuality=new e.EventEmitter,this.ready=new e.EventEmitter,this.stateChange=new e.EventEmitter,this.error=new e.EventEmitter,this.apiChange=new e.EventEmitter,this.playbackQualityChange=new e.EventEmitter,this.playbackRateChange=new e.EventEmitter,this._youtubeContainer=new e.EventEmitter,this._destroyed=new e.EventEmitter}return Object.defineProperty(t.prototype,"videoId",{get:function(){return this._videoId},set:function(t){this._videoId=t,this._videoIdObs.emit(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t||g,this._heightObs.emit(this._height)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t||f,this._widthObs.emit(this._width)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startSeconds",{set:function(t){this._startSeconds.emit(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endSeconds",{set:function(t){this._endSeconds.emit(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"suggestedQuality",{set:function(t){this._suggestedQuality.emit(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;if(_){var e=n.of(!0);if(!window.YT){if(this.showBeforeIframeApiLoads)throw new Error("Namespace YT not found, cannot construct embedded youtube player. Please install the YouTube Player API Reference for iframe Embeds: https://developers.google.com/youtube/iframe_api_reference");var u=new n.Subject;window.onYouTubeIframeAPIReady=function(){t._ngZone.run(function(){return u.next(!0)})},e=u.pipe(i.take(1),i.startWith(!1))}var p=this._videoIdObs.pipe(i.startWith(this._videoId)),y=this._widthObs.pipe(i.startWith(this._width)),h=this._heightObs.pipe(i.startWith(this._height)),d=this._startSeconds.pipe(i.startWith(void 0)),l=this._endSeconds.pipe(i.startWith(void 0)),f=this._suggestedQuality.pipe(i.startWith(void 0)),g=s(this._youtubeContainer,p,e,y,h,this.createEventsBoundInZone()).pipe(a(),i.takeUntil(this._destroyed),i.publish());g.subscribe(function(e){return t._player=e}),r(g,y,h),o(g,f),c(g,p,d,l,f,this._destroyed),g.connect()}},t.prototype.createEventsBoundInZone=function(){var t=this;return{onReady:this._runInZone(function(e){return t.ready.emit(e)}),onStateChange:this._runInZone(function(e){return t.stateChange.emit(e)}),onPlaybackQualityChange:this._runInZone(function(e){return t.playbackQualityChange.emit(e)}),onPlaybackRateChange:this._runInZone(function(e){return t.playbackRateChange.emit(e)}),onError:this._runInZone(function(e){return t.error.emit(e)}),onApiChange:this._runInZone(function(e){return t.apiChange.emit(e)})}},t.prototype.ngAfterViewInit=function(){this._youtubeContainer.emit(this.youtubeContainer.nativeElement)},t.prototype.ngOnDestroy=function(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=void 0,this._destroyed.emit())},t.prototype._runInZone=function(t){var e=this;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];e._ngZone.run(function(){return t.apply(void 0,n)})}},t.prototype.playVideo=function(){this._player&&this._player.playVideo()},t.prototype.pauseVideo=function(){this._player&&this._player.pauseVideo()},t.prototype.stopVideo=function(){this._player&&this._player.stopVideo()},t.prototype.seekTo=function(t,e){this._player&&this._player.seekTo(t,e)},t.prototype.mute=function(){this._player&&this._player.mute()},t.prototype.unMute=function(){this._player&&this._player.unMute()},t.prototype.isMuted=function(){return!this._player||this._player.isMuted()},t.prototype.setVolume=function(t){this._player&&this._player.setVolume(t)},t.prototype.getVolume=function(){return this._player?this._player.getVolume():0},t.prototype.setPlaybackRate=function(t){if(this._player)return this._player.setPlaybackRate(t)},t.prototype.getPlaybackRate=function(){return this._player?this._player.getPlaybackRate():0},t.prototype.getAvailablePlaybackRates=function(){return this._player?this._player.getAvailablePlaybackRates():[]},t.prototype.getVideoLoadedFraction=function(){return this._player?this._player.getVideoLoadedFraction():0},t.prototype.getPlayerState=function(){if(_&&window.YT)return this._player?this._player.getPlayerState():-1},t.prototype.getCurrentTime=function(){return this._player?this._player.getCurrentTime():0},t.prototype.getPlaybackQuality=function(){return this._player?this._player.getPlaybackQuality():"default"},t.prototype.getAvailableQualityLevels=function(){return this._player?this._player.getAvailableQualityLevels():[]},t.prototype.getDuration=function(){return this._player?this._player.getDuration():0},t.prototype.getVideoUrl=function(){return this._player?this._player.getVideoUrl():""},t.prototype.getVideoEmbedCode=function(){return this._player?this._player.getVideoEmbedCode():""},t.decorators=[{type:e.Component,args:[{selector:"youtube-player",changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None,template:"<div #youtubeContainer></div>"}]}],t.ctorParameters=function(){return[{type:e.NgZone}]},t.propDecorators={videoId:[{type:e.Input}],height:[{type:e.Input}],width:[{type:e.Input}],startSeconds:[{type:e.Input}],endSeconds:[{type:e.Input}],suggestedQuality:[{type:e.Input}],showBeforeIframeApiLoads:[{type:e.Input}],ready:[{type:e.Output}],stateChange:[{type:e.Output}],error:[{type:e.Output}],apiChange:[{type:e.Output}],playbackQualityChange:[{type:e.Output}],playbackRateChange:[{type:e.Output}],youtubeContainer:[{type:e.ViewChild,args:["youtubeContainer",{static:!1}]}]},t}(),m=[b],v=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:m,exports:m}]}],t}();t.YouTubePlayer=b,t.YouTubePlayerModule=v,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=youtube-player.umd.min.js.map
